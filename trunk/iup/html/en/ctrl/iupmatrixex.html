<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Strict//EN">
<html>
<head>

  <meta http-equiv="Content-Language" content="en-us">


  <title>IupMatrixEx</title>
  <link rel="stylesheet" type="text/css" href="../../style.css">

  <style type="text/css">
.style1 {
	margin-left: 40px;
}
  .auto-style1 {
	  background-color: #E1E1E1;
  }
  .auto-style2 {
	  text-align: center;
  }
  .auto-style3 {
	  font-size: medium;
	  letter-spacing: normal;
	  background-color: #FFFFFF;
  }
  .style4 {
	font-size: large;
}
  </style>
</head>


<body>

<div id="navigation">
  
<ul>

    <li><a href="#Creation">Creation</a></li>

    <li><a href="#Attributes">Attributes</a></li>

    <li><a href="#Callbacks">Callbacks</a></li>

    <li><a href="#Notes">Notes</a></li>

    <li><a href="#Examples">Examples</a></li>

    <li><a href="#SeeAlso">See Also</a></li>

  
</ul>

</div>


<h2>IupMatrixEx <span class="style4">(since 3.9)</span></h2>


  
<p>
  <strong>IupMatrix</strong> expansion library.</p>
<p>
  This library adds new features to the <strong>IupMatrix</strong> in order to 
  expand the current features to wider the <strong>IupMatrix</strong> 
  applications.</p>
<p>
  The expansion can be used in two different ways: using a new control called
  <strong>IupMatrixEx</strong>, or by calling <strong>IupMatrixExInit</strong> 
  for an existing <strong>IupMatrix</strong> control.</p>
<p>
  Each feature can be enabled or disabled individually, and it will have an 
  exclusive set of attributes and/or callbacks. </p>
<p>
  The matrix can be used in callback mode or in standard more.</p>
  <h3>Initialization and Usage</h3>
<p>
The<span class="Apple-converted-space">&nbsp;</span><b>IupMatrixExOpen</b><span class="Apple-converted-space">&nbsp;</span>function 
must be called after a<span class="Apple-converted-space">&nbsp;</span><b>IupOpen</b>, 
so that the control can be used. The &quot;iupmatrixex.h&quot; file must also be 
included in the source code. The program must be linked to the controls library 
(iupmatrixex), and it depends on the <a href="../iupcontrols.html">Controls 
Library</a>.</p>
<p>To make the control available in Lua use require&quot;iupluamatrixex&quot; or manually 
call the initialization function in C, 
<b>iupmatrixexlua_open</b>, after calling <b>iuplua_open</b>.
  &nbsp;When manually calling the function the iupluamatrixex.h file must also be included in the source code 
and the program must be linked to the 
Lua control 
  library (iupluamatrixex).</p>


<h3><a name="Creation">Creation</a></h3>

<pre>Ihandle* IupMatrixEx(void); [in C]<br>iup.matrixex{} -&gt; (<strong>elem</strong>: ihandle) [in Lua]<br>matrixex(<strong>action</strong>) [in LED]</pre>

  
<p>
  This function returns the identifier of the 
  created editing component, or NULL if an error occurs.</p>


<h3><a name="Attributes">Attributes</a></h3>


<p>The 
  <strong>IupMatrixEx</strong> element handle all attributes defined for a
<a href="iupmatrix_attrib.html">IupMatrix</a> control.</p>
<blockquote>
  <hr>
</blockquote>
<p><strong>BUSY</strong>: returns Yes if the library is changing the matrix 
contents internally as a result of an operation such as paste or duplicate. Can 
be canceled setting to No. See the BUSY_CB callback for more information.</p>
<p><strong>BUSYPROGRESS</strong>: flag to display a progress dialog while data 
is being changed. Can be Yes or No. Default: No.</p>
<p><strong>COPY</strong> (write-only): copies the selected cells to the 
clipboard in TEXT format. If value is ALL then all cells are copied regardless if 
there is a selection. If value is MARKED then the
<a href="iupmatrix_attrib.html#MARKED">MARKED</a> attribute is used to define 
the selection. Value can also be a range of cells in the format &quot;L1:C1-L2:C2&quot;. Title cells are not copied, even when a line or column is fully 
selected. Cells are separated with tabs ('\t') and lines are separated with line 
feeds ('\n'). If the column or line is invisible (its size=0) it is not copied.</p>
<p class="info">When MARKMODE=CELLS and sparse cells are selected there are two options for copy 
according to the <strong>COPYKEEPSTRUCT</strong> attribute, if &quot;Yes&quot; the copied 
data will fit a rectangular region that contains all the selected cells and the 
non selected cells inside the region will be copied as empty spaces (' '), if 
&quot;No&quot; only the selected cells will be copied but they must contain a matrix 
consistent structure, in other words the selected column pattern must be 
consistent along lines.<br>LASTERROR can be set to &quot;NOMARKED&quot; (no selected 
cells) or &quot;MARKEDCONSISTENCY&quot; (when COPYKEEPSTRUCT=NO and inconsistent 
selection).</p>
<p><strong>COPYDATA</strong>: Use the same parameters of the COPY attributes but 
will copy to an internal buffer. To retrieve the buffer get the attribute value 
after setting it. To clear the internal buffer set it to NULL.</p>
<p><strong>COPYFILE</strong> (write-only): copies all visible cells to a given 
file. Value is the file name to be saved. LASTERROR can also be set to 
&quot;INVALIDFILENAME&quot; (failed to open). Data will be in plain text format, but the 
file format will be defined by the TEXTFORMAT attribute, can be &quot;TXT&quot; (default), 
&quot;HTML&quot; or &quot;LaTeX&quot;. The COPYCAPTION attribute can be used to define a caption 
that will be added to the file before the data, depending on the file format.</p>
<p class="info">When using TXT format, the TEXTSEPARATOR attribute can used to 
define a column separator (default is tab '\t') and line separator will be line 
feeds ('\n').<br>When using LaTeX format, the LATEXLABEL attribute can used to 
define a label for the table.<br>When using HTML format, the attributes 
&quot;HTML&lt;TABLE&gt;&quot;, &quot;HTML&lt;TR&gt;&quot;, &quot;HTML&lt;TH&gt;&quot;, &quot;HTML&lt;TD&gt;&quot;, &quot;HTML&lt;CAPTION&gt;&quot; can use used 
to define a complement to be inserted in the respective tag definition, so a &quot; 
style=..&quot; or a &quot; class=..&quot; complements can be added. The HTMLADDFORMAT can be 
used to add the attributes ALIGNMENT?, BGCOLOR?:?, FGCOLOR?:? and FONT?:? to the 
&quot;style&quot; complement of the &quot;TD&quot; tag.</p>
<p><strong>COPYCOLTO<em>L:C</em></strong> (write-only): copies the value of the 
given cell to a specified range of cells in the same column. Value can be &quot;ALL&quot; 
(for all lines), TOP (for all lines before the given line), BOTTOM (for all 
lines after the given line), MARKED (for all lines where the cell is marked), or 
a series of intervals in the format &quot;L1-L2,L3-L4,L5,L6-L7,...&quot;.</p>
<p><strong>FREEZE:</strong> freezes the scroll of columns and lines up to the 
given cell. Can be: &quot;Yes&quot; - uses the value of the FOCUS_CELL attribute, &quot;<em>L</em>:<em>C</em>&quot; 
where L and C are the line and column, or &quot;No&quot; clear the freeze state. 
Internally will set the NUMLIN_NOSCROLL and NUMCOL_NOSCROLL, and change the 
FRAMEHORIZCOLOR of the line and the FRAMEVERTCOLOR of the column to the color 
defined by FREEZEBGCOLOR.</p>
<p>
<strong>FREEZEBGCOLOR</strong>:
  color used for the freeze lines. Default: &quot;0 0 255&quot;. Used only by the FREEZE 
attribute.</p>
<p>
<strong>LASTERROR</strong> (read-only): set when an error occurred during an 
operation. It is reset to NULL at the start of every operation that sets its 
value.</p>
<p>
<strong>PASTE</strong> (write-only): paste data from the clipboard. Data is 
obtained from the clipboard in TEXT format. Value is the insert position, it can 
be &quot;FOCUS&quot; to use the <a href="iupmatrix_attrib.html#FOCUS_CELL">FOCUS_CELL</a> 
attribute, can be &quot;SELECTION&quot; to use the start of the selected groups of cells 
(top-left selected cell), or can be a cell address &quot;L:C&quot;.</p>
<p class="info">Data must be in plain text format. Lines can be separated in 
DOS, UNIX or MAC format. Columns can be separated with tabs ('\t'), with 
semicolon (';') or a custom value defined by the TEXTSEPARATOR attribute. Data 
must contain an exact matrix organization. Use the attribute TEXTSKIPLINES to 
skip a number of lines in the beginning of the data. If data at the insert 
position will have more lines or columns than the current matrix, then the
<a href="#PASTESIZE_CB">PASTESIZE_CB</a> callback is called. Only visible cells 
will be updated. If defined the <a href="iupmatrix_cb.html#EDITION_CB">
EDITION_CB</a> callback will be called before the cell value is set. LASTERROR 
can be set to &quot;NOTEXT&quot; (data is empty or NULL), &quot;INVALIDMATRIX&quot; (not a matrix 
data). BUSY will be set to Yes during the operation.</p>
<p>
<strong>PASTEDATA</strong> (write-only): paste data from a memory buffer. Value 
is the data. Insert position is obtained from the
<a href="iupmatrix_attrib.html#FOCUS_CELL">FOCUS_CELL</a> attribute. See PASTE 
for more details.</p>
<p>
<strong>PASTEFILE</strong> (write-only): paste data from a file. Value is the 
file name to be loaded. Insert position is always &quot;0:0&quot;. See PASTE for more 
details. LASTERROR can also be set to &quot;INVALIDFILENAME&quot; (failed to open).</p>
<p>
<strong>VISIBLECOL<em>id</em></strong>: returns if the column is visible (&quot;Yes&quot; 
or &quot;No&quot;). Actually checks for WIDTHid and RASTERWIDTHid if they are defined and 
non zero, but more complex logic when id=0. When changed will simply set those 
attributes to zero or NULL (when setting to NULL and col=0 not necessarily the 
column will became visible because of the internal matrix logic for titles). </p>
<p>
<strong>VISIBLELIN<em>id</em></strong>: returns if the line is visible (&quot;Yes&quot; or 
&quot;No&quot;). Actually checks for HEIGHTid and RASTERHEIGHTid if they are defined and 
non zero, but more complex logic when id=0. When changed will simply set those 
attributes to zero or NULL (when setting to NULL and lin=0 not necessarily the 
line will became visible because of the internal matrix logic for titles). </p>



  
<h3><a name="Callbacks">Callbacks</a></h3>

<p>The 
  <strong>IupMatrixEx</strong> element understands all callbacks defined for a
<a href="iupmatrix_cb.html">IupMatrix</a> control.</p>

    
<hr class="style1">


<p><strong>BUSY_CB</strong>: Action generated when the library is changing the 
matrix contents as a result of an operation such as paste or copy. </p>

  
    
<pre>int function(Ihandle*<strong> ih</strong>, int <strong>status</strong>, int <strong>count</strong>, char* <strong>name</strong>); [in C]<br><strong>elem</strong>:busy_cb(<strong>status</strong>,<strong>count</strong>: number, <strong>name</strong>: string) -&gt; (<strong>ret</strong>: number) [in Lua]</pre>

    
<p class="info"><strong>ih</strong>:
  identifier of the element that activated the 
  event.<br><strong>status</strong>: can be 1=process started, 2=iteration, 
0=process finished.<br><strong>count</strong>: when status=1 is the total number 
of iterations. when status=2 is the current iteration. ignored when status=0.<br>
<strong>name</strong>: valid only when status=1, otherwise is NULL. Can be 
&quot;PASTE&quot;, &quot;PASTEDATA&quot;, &quot;PASTEFILE&quot;.</p>

<p class="info"><u>Returns</u>: When status=2 and IUP_IGNORE is returned the 
processing is aborted. When process is aborted the callback will be called once 
more with status=0.</p>
<p><strong><a name="PASTESIZE_CB">PASTESIZE_CB</a></strong>: Action generated 
when pasting and data at the insert position will have more lines or columns 
than the current matrix. The application can change the NUMLIN and NUMCOL 
attributes to receive the new data.</p>

  
    
<pre>int function(Ihandle*<strong> ih</strong>, int <strong>num_lin</strong>, int <strong>num_col</strong>); [in C]<br><strong>elem</strong>:busy_cb(<strong>num_lin</strong>,<strong>num_col</strong>: number, <strong>name</strong>: string) -&gt; (<strong>ret</strong>: number) [in Lua]</pre>

    
<p class="info"><strong>ih</strong>:
  identifier of the element that activated the 
  event.<br><strong>status</strong>: can be 1=process started, 2=iteration, 
0=process finished.<br><strong>count</strong>: when status=1 is the total number 
of iterations. when status=2 is the current iteration. ignored when status=0.<br>
<strong>name</strong>: valid only when status=1, otherwise is NULL. Can be 
&quot;PASTE&quot;, &quot;PASTEDATA&quot;, &quot;PASTEFILE&quot;.</p>

<p class="info"><u>Returns</u>: if returns IUP_IGNORE the process will be 
aborted. if returns IUP_CONTINUE, the NUMLIN and NUMCOL attributes will be 
automatically changed to the given values. Otherwise and if the callback does 
not exist nothing is done, and the exceeding data will be discarded. </p>



<h3>Auxiliary Functions</h3>
<pre>void <b>IupMatrixExInit</b>(Ihandle* <b>ih</b>); [in C]
<b>iup.MatrixExInit</b>(<b>ih</b>: ihandle) [in Lua]</pre>
<p>Register the new attributes and callbacks in a regular <strong>IupMatrix</strong> 
control.</p>



<!--

<h3><a name="IndicatorStyles">Indicator Styles</a></h3>


<p>
  Indicators are used to display additional information over the top of styling. 
  They can be used to show, for example, syntax errors, deprecated names and bad 
  indentation by drawing underlines under text or boxes around text.</p>
<p>
  The indicator styles currently available in Scintilla are:</p>

<table align="center">

		<tr>

		<th style="width: 214px">IupScintilla Enumeration</th>

		<th>Visual Effect&nbsp;</th>

		</tr>

	<tr>

		<td style="width: 214px">IUP_SCINTILLA_PLAIN</td>

		<td>Underlined with a single, straight line.</td>

	</tr>

	<tr>

		<td style="width: 214px;">IUP_SCINTILLA_SQUIGGLE</td>

		<td>A squiggly underline. Requires 3 pixels of 
		descender space.</td>

	</tr>

	<tr>

		<td style="width: 214px">IUP_SCINTILLA_TT</td>

		<td>A line of small T shapes.</td>

	</tr>

	<tr>

		<td style="width: 214px">IUP_SCINTILLA_DIAGONAL</td>

		<td>Diagonal hatching.</td>

	</tr>

		<tr>

		<td style="width: 214px">IUP_SCINTILLA_STRIKE</td>

		<td>Strike out.</td>

		</tr>
		<tr>

		<td style="width: 214px">IUP_SCINTILLA_HIDDEN</td>

		<td>An indicator with no visual effect.</td>

		</tr>
		<tr>

		<td style="width: 214px">IUP_SCINTILLA_BOX</td>

		<td>A rectangle around the text.</td>

		</tr>
		<tr>

		<td style="width: 214px">IUP_SCINTILLA_ROUNDBOX</td>

		<td>A rectangle with rounded corners around the text using translucent 
		drawing with the interior usually more transparent than the border.</td>

		</tr>
		<tr>

		<td style="width: 214px">IUP_SCINTILLA_STRAIGHTBOX</td>

		<td>A rectangle around the text using translucent drawing with the 
		interior usually more transparent than the border.</td>

		</tr>
		<tr>

		<td style="width: 214px">IUP_SCINTILLA_DASH</td>

		<td>A dashed underline.</td>

		</tr>
		<tr>

		<td style="width: 214px">IUP_SCINTILLA_DOTS</td>

		<td>A dotted underline.</td>

		</tr>
		<tr>

		<td style="width: 214px">IUP_SCINTILLA_SQUIGGLELOW</td>

		<td>Similar to IUP_SCINTILLA_SQUIGGLE but only using 2 vertical pixels 
		so will fit under small fonts.</td>

		</tr>
		<tr>

		<td style="width: 214px">IUP_SCINTILLA_DOTBOX</td>

		<td>A dotted rectangle around the text using translucent drawing.</td>

		</tr>
		<tr>

		<td style="width: 214px">IUP_SCINTILLA_SQUIGGLEPIXMAP</td>

		<td>A version of IUP_SCINTILLA_SQUIGGLE that draws using a pixmap 
		instead of as a series of line segments for performance.</td>

		</tr>
</table>

-->

<h3><a name="Notes">Notes</a></h3>
<p>&nbsp;</p>


<h3><a name="Examples">Examples</a></h3>

<p><a href="../../examples/">Browse for Example Files</a></p>
<table align="center">

	<tr>

		<td>&nbsp;</td>

	</tr>
</table>

	
<h3><a name="SeeAlso">See Also</a></h3>


<p><a href="iupmatrix.html">IupMatrix</a></p>


</body>
</html>
